<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="logo.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JBX Wallet - Dark HoloFi Engine</title>

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

  <style>
    /* Dark, sóbrio, sem neon */
    body {
      background: linear-gradient(135deg, #0a0f14 0%, #121b27 100%);
      color: #e0e0e0; /* fonte branca fosca */
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
    }
    .container {
      max-width: 480px;
      margin: auto;
      background: #1a2638; /* tom escuro, sem brilho */
      padding: 32px;
      border-radius: 16px;
      box-shadow: 0 0 10px #00000088; /* sombra suave e escura */
      border: 1px solid #2a3a55;
    }
    h1 {
      color: #ffffff;
      text-align: center;
      margin-bottom: 32px;
      font-weight: 700;
      letter-spacing: 1.5px;
      /* removido text-shadow */
    }
    label, input, select {
      display: block;
      width: 100%;
      margin-top: 14px;
      font-size: 1.1rem;
      font-weight: 600;
      color: #e0e0e0;
      /* removido text-shadow */
    }
    input, select {
      padding: 12px;
      background: #122034; /* fundo escuro */
      border: 1px solid #2a3a55;
      border-radius: 8px;
      color: #e0e0e0;
      font-weight: 500;
      transition: border-color 0.3s ease, background-color 0.3s ease;
    }
    input:focus, select:focus {
      outline: none;
      border-color: #5599dd;
      background: #1c3a6b; /* tom escuro azul */
      color: #ffffff;
      box-shadow: none; /* sem brilho */
    }
    .btn {
      margin-top: 28px;
      padding: 14px;
      font-size: 1.1rem;
      width: 48%;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight: 700;
      box-shadow: none; /* sem brilho */
      transition: background-color 0.3s ease;
      color: #f0f0f0;
    }
    #btn-deposit {
      background: #007e33; /* verde escuro */
      float: left;
    }
    #btn-deposit:hover {
      background: #005522;
    }
    #btn-withdraw {
      background: #cc0000; /* vermelho escuro */
      float: right;
    }
    #btn-withdraw:hover {
      background: #880000;
    }
    #btn-generate-pix {
      margin-top: 32px;
      background: #155ab6; /* azul escuro */
      color: #f0f0f0;
      width: 100%;
      border-radius: 12px;
      font-weight: 700;
      box-shadow: none;
      transition: background-color 0.3s ease;
      clear: both;
    }
    #btn-generate-pix:hover {
      background: #0f3f7a;
    }
    #saldo-container {
      text-align: center;
      margin-top: 40px;
      color: #a0d6b4; /* verde fosco */
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: 1px;
      clear: both;
      /* removido text-shadow */
    }
    #qrcode-container {
      margin-top: 32px;
      text-align: center;
      background: #122034;
      padding: 20px;
      border-radius: 16px;
      box-shadow: inset 0 0 6px #00000066; /* sombra interna sutil */
      user-select: none;
    }
    #asset-select {
      cursor: not-allowed;
      background: #122034;
      border-color: #336699;
      color: #778fbb;
    }
  </style>
</head>
<body>

  <h1>JBX1000 Wallet</h1>

  <div class="container">
    <label>Ativo:</label>
    <select id="asset-select" disabled>
      <option value="JBX1000" selected>JBX1000</option>
    </select>

    <label>Valor (R$):</label>
    <input type="number" id="valor" min="1" step="0.01" placeholder="0.00" />

    <label>Geminiosidade (%): <span id="gem-value">0</span>%</label>
    <input type="range" id="gem" min="0" max="10" value="0" />

    <button id="btn-deposit" class="btn">Depositar</button>
    <button id="btn-withdraw" class="btn">Sacar</button>

    <button id="btn-generate-pix">Gerar QR Code Pix (5% taxa)</button>

    <div id="saldo-container">Saldo: R$ <span id="saldo">0.00</span></div>
    <div id="qrcode-container"></div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
  const STORAGE_KEY = 'jbx1000_wallet_saldo';
  let saldoAtual = parseFloat(localStorage.getItem(STORAGE_KEY)) || 0;

  function atualizarSaldoNaTela() {
    document.getElementById('saldo').innerText = saldoAtual.toFixed(2);
  }

  document.getElementById('gem').addEventListener('input', e => {
    document.getElementById('gem-value').innerText = e.target.value;
  });

  function fibonacci(n) {
    if (n <= 1) return 1;
    let a = 1, b = 1;
    for (let i = 2; i <= n; i++) [a, b] = [b, a + b];
    return b;
  }

  function validarValor() {
    const val = parseFloat(document.getElementById('valor').value);
    if (isNaN(val) || val <= 0) {
      alert('Informe um valor válido maior que zero.');
      return null;
    }
    return val;
  }

  function limparValorInput() {
    document.getElementById('valor').value = '';
  }

  function limparQRCode() {
    document.getElementById('qrcode-container').innerHTML = '';
  }

  document.getElementById('btn-deposit').onclick = () => {
    const valor = validarValor();
    if (valor === null) return;

    const gem = parseInt(document.getElementById('gem').value);
    const fibo = fibonacci(gem);
    const valorFinal = valor * fibo;

    saldoAtual += valorFinal;
    localStorage.setItem(STORAGE_KEY, saldoAtual.toFixed(2));

    alert(`Depósito realizado com Geminiosidade x${fibo}\nValor creditado: R$ ${valorFinal.toFixed(2)}`);
    atualizarSaldoNaTela();
    limparValorInput();
    limparQRCode();
  };

  document.getElementById('btn-withdraw').onclick = () => {
    const valor = validarValor();
    if (valor === null) return;

    if (valor > saldoAtual) {
      alert('Saldo insuficiente para saque.');
      return;
    }

    saldoAtual -= valor;
    localStorage.setItem(STORAGE_KEY, saldoAtual.toFixed(2));

    alert(`Saque de R$ ${valor.toFixed(2)} solicitado com sucesso.\n⚠️ Processamento em até 24 horas.`);
    atualizarSaldoNaTela();
    limparValorInput();
    limparQRCode();
  };

  document.getElementById('btn-generate-pix').onclick = () => {
    const valor = validarValor();
    if (valor === null) return;

    const valorComTaxa = (valor * 1.05).toFixed(2);

    const chavePix = "48761013889"; // seu Pix
    const nomeRecebedor = "JBX Wallet";
    const cidade = "SAO PAULO";
    const identificador = "PIXJBX1000";

    QRCode.toCanvas(document.getElementById('qrcode-container'), `pix:${chavePix}?amount=${valorComTaxa}`, { width: 220 }, function (error) {
      if (error) alert('Erro ao gerar QR Code: ' + error);
    });
  };

  atualizarSaldoNaTela();
</script>

</body>
</html>
