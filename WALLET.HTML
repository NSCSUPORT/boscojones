<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="logo.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bosco Jones Wallet - Login, Registro & Wallet</title>
  <style>
    /* seu CSS permanece o mesmo, para brevidade omito aqui */
  </style>
</head>
<body>
  <!-- LOGIN FORM -->
  <section id="login-section" class="container">
    <!-- ... seu formulário login ... -->
  </section>

  <!-- REGISTRO FORM -->
  <section id="register-section" class="container" style="display:none;">
    <!-- ... seu formulário registro ... -->
  </section>

  <!-- WALLET -->
  <section id="wallet-section" class="container" style="display:none;">
    <div class="wallet-header">
      <h2>Bem-vindo, <span id="user-display"></span>!</h2>
      <div class="balance" id="balance">USD 0.00</div>
      <div class="balance-fiat" id="balance-fiat">USD 0.00</div>
    </div>

    <!-- Seletor de ativo -->
    <form class="transaction-form">
      <label for="currency">Selecionar Ativo:</label>
      <select id="currency" required>
        <!-- suas opções -->
      </select>
    </form>

    <!-- Formulário de Depósito -->
    <form id="deposit-form" class="transaction-form" autocomplete="off">
      <label for="deposit-amount">Depositar valor (USD):</label>
      <input type="number" id="deposit-amount" min="0.01" step="0.01" required placeholder="0.00" />
      <button type="submit">Depositar</button>
    </form>

    <!-- PIX PAYMENT SECTION -->
    <section id="pix-payment-section" class="container" style="display:none;">
      <h2>Pagamento via PIX</h2>
      <form id="pix-form" autocomplete="off">
        <label for="pix-amount">Informe o valor para pagamento (R$):</label>
        <input type="number" id="pix-amount" min="0.01" step="0.01" required placeholder="0.00" />
        <button type="submit">Gerar QR Codes PIX</button>
      </form>

      <div id="pix-qrcodes" style="display:none;">
        <div class="qrcode-box">
          <h3>Pagamento Principal</h3>
          <div id="qrcode-main"></div>
          <p id="pix-main-amount"></p>
        </div>
        <div class="qrcode-box">
          <h3>Pagamento 5% taxa para 48761013889</h3>
          <div id="qrcode-tax"></div>
          <p id="pix-tax-amount"></p>
        </div>
      </div>
    </section>

    <!-- Formulário de Saque -->
    <form id="withdraw-form" class="transaction-form" autocomplete="off">
      <label for="withdraw-amount">Sacar valor (USD):</label>
      <input type="number" id="withdraw-amount" min="0.01" step="0.01" required placeholder="0.00" />
      <button type="submit">Sacar</button>
    </form>

    <!-- Histórico -->
    <div class="history" id="transaction-history">
      <strong>Histórico de transações:</strong>
      <p>Nenhuma transação ainda.</p>
    </div>

    <button id="logout-btn" class="btn-logout">Sair</button>
  </section>

  <footer>
    © 2025 Bosco Jones Wallet · Desenvolvido por lucas januario ·
  </footer>

  <!-- Biblioteca QRCode.js -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
  <script>
    // Exemplo simples para gerar QR codes PIX

    const pixForm = document.getElementById('pix-form');
    const pixQrcodes = document.getElementById('pix-qrcodes');
    const qrcodeMainDiv = document.getElementById('qrcode-main');
    const qrcodeTaxDiv = document.getElementById('qrcode-tax');
    const pixMainAmount = document.getElementById('pix-main-amount');
    const pixTaxAmount = document.getElementById('pix-tax-amount');

    pixForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const amount = parseFloat(document.getElementById('pix-amount').value);
      if (isNaN(amount) || amount <= 0) {
        alert('Informe um valor válido para pagamento.');
        return;
      }

      // Valores PIX
      const taxAmount = +(amount * 0.05).toFixed(2);
      const mainAmount = +(amount - taxAmount).toFixed(2);

      // Aqui você deve montar os dados PIX (string) para os QR Codes
      // Exemplo simples: gerar um texto para representar o pagamento
      // Substitua pelas strings PIX reais no formato esperado pelo banco

      const pixKeyMain = 'your-pix-key-main@exemplo.com';  // altere para chave real
      const pixKeyTax = '48761013889'; // chave pix para taxa 5%

      // Montar strings de pagamento PIX (simplificado)
      const pixPayloadMain = `PIX|CHAVE:${pixKeyMain}|VALOR:${mainAmount}`;
      const pixPayloadTax = `PIX|CHAVE:${pixKeyTax}|VALOR:${taxAmount}`;

      // Limpar qrcodes anteriores
      qrcodeMainDiv.innerHTML = '';
      qrcodeTaxDiv.innerHTML = '';

      // Gerar QR codes
      QRCode.toCanvas(qrcodeMainDiv, pixPayloadMain, { width: 180 }, (error) => {
        if (error) console.error(error);
      });
      QRCode.toCanvas(qrcodeTaxDiv, pixPayloadTax, { width: 180 }, (error) => {
        if (error) console.error(error);
      });

      // Exibir valores
      pixMainAmount.textContent = `R$ ${mainAmount.toFixed(2)}`;
      pixTaxAmount.textContent = `R$ ${taxAmount.toFixed(2)}`;

      // Exibir área dos QR Codes
      pixQrcodes.style.display = 'flex';
      document.getElementById('pix-payment-section').style.display = 'block';
    });
  </script>
</body>
</html>
