<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="logo.ico">
  <title>Wallet JBX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* Global Dark HoloFi Theme */
    body {
      background-color: #0d1117;
      color: #c9d1d9;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 420px;
      margin: auto;
      background-color: #161b22;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.6);
      transition: transform 0.3s;
    }
    .container:hover {
      transform: translateY(-4px);
    }
    h1 {
      color: #58a6ff;
      text-align: center;
      margin-bottom: 24px;
    }
    label {
      display: block;
      margin-top: 16px;
      font-weight: bold;
      color: #8ab4f8;
    }
    select, input[type="number"], input[type="range"] {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      background-color: #0d1117;
      color: #c9d1d9;
      border: 1px solid #30363d;
      appearance: none;
      transition: border-color 0.3s;
    }
    select:focus, input[type="number"]:focus, input[type="range"]:focus {
      outline: none;
      border-color: #58a6ff;
    }
    input::placeholder {
      color: #8b949e;
    }
    /* Dark Geminiosidade Slider */
    input[type="range"]::-webkit-slider-runnable-track {
      height: 6px;
      background: #30363d;
      border-radius: 3px;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      background: #4caf50;
      border-radius: 50%;
      margin-top: -7px;
      cursor: pointer;
      border: 2px solid #357a38;
      transition: background 0.3s, transform 0.2s;
    }
    input[type="range"]:hover::-webkit-slider-thumb {
      background: #357a38;
      transform: scale(1.1);
    }
    input[type="range"]::-moz-range-track {
      height: 6px;
      background: #30363d;
      border-radius: 3px;
    }
    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: #4caf50;
      border-radius: 50%;
      border: 2px solid #357a38;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }
    input[type="range"]:hover::-moz-range-thumb {
      background: #357a38;
      transform: scale(1.1);
    }
    #geminiosidade-placeholder {
      font-size: 0.85rem;
      color: #8b949e;
      margin-top: 2px;
      font-style: italic;
      user-select: none;
    }
    /* Buttons Dynamic Styles */
    .btn {
      width: 48%;
      padding: 12px;
      margin-top: 24px;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      color: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      transition: background 0.3s, transform 0.2s;
    }
    .btn:hover {
      transform: translateY(-2px);
    }
    #btn-deposit {
      background: linear-gradient(135deg, #4caf50, #81c784);
      float: left;
    }
    #btn-withdraw {
      background: linear-gradient(135deg, #f44336, #e57373);
      float: right;
    }
    /* Info Sections */
    #tax-info, #geminiosidade-info {
      margin-top: 12px;
      font-size: 0.9rem;
      color: #adbac7;
      clear: both;
    }
    /* QR Code Display */
    #qrcode-container {
      clear: both;
      text-align: center;
      margin-top: 28px;
      background-color: #111;
      padding: 16px;
      border-radius: 8px;
      min-height: 220px;
      color: #c9d1d9;
      box-shadow: inset 0 0 8px rgba(0,0,0,0.8);
    }
    #qrcode-container img {
      max-width: 180px;
      max-height: 180px;
      margin-top: 12px;
    }
    footer {
      text-align: center;
      background-color: #111;
      color: #8b949e;
      margin-top: 40px;
      padding: 12px;
      border-radius: 8px;
      font-size: 0.85rem;
      user-select: none;
    }
  </style>
</head>
<body>
  <h1>JBX500 Wallet</h1>
  <div class="container">
    <form id="asset-form">
      <label for="asset-select">Escolha um ativo:</label>
      <select id="asset-select" required>
        <option value="">Selecione um ativo</option>
        <!-- ativos listados -->
        <option value="POSN-HF">PoSN-HF (Proof of Stake Hybrid Fund)</option>
        <option value="BTC">Bitcoin (BTC)</option>
        <option value="ETH">Ethereum (ETH)</option>
        <!-- ... restante dos ativos -->
        <option value="JBX500">JBX500 Asset (HoloFi Symbiotic Dark)</option>
      </select>
    </form>
    <form id="deposit-form" class="transaction-form" autocomplete="off">
      <label for="valor">Valor (R$):</label>
      <input type="number" id="valor" min="0.01" step="0.01" required placeholder="0.00" />
      <label for="geminiosidade">Taxa de Geminiosidade (%): <span id="geminiosidade-value">0</span>%</label>
      <input
        type="range"
        id="geminiosidade"
        min="0"
        max="100"
        step="1"
        value="0"
        oninput="atualizarTaxaGeminiosidade(this.value)"
      />
      <div id="geminiosidade-placeholder">Ajuste atÃ© 100% de Geminiosidade</div>
      <div id="tax-info">
        Taxa fixa: 5% (R$ <span id="taxa-fixa-valor">0.00</span>)<br />
        Taxa geminiosidade: R$ <span id="taxa-geminiosidade-valor">0.00</span><br />
        <strong>Total a pagar: R$ <span id="total-pagar">0.00</span></strong>
      </div>
      <button type="button" id="btn-deposit" class="btn" onclick="gerarPix()">Gerar QR Code Pix (DepÃ³sito)</button>
      <button type="button" id="btn-withdraw" class="btn" onclick="fazerSaque()">Sacar</button>
    </form>
    <div id="qrcode-container">Nenhum QR Code gerado.</div>
  </div>
  <footer>
   HoloFi Symbiotic Dark ðŸ’š Â© 2025 Bosco Jones Wallet<br />
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script>
    const valorInput = document.getElementById('valor');
    const geminiosidadeInput = document.getElementById('geminiosidade');
    const taxaFixaValorSpan = document.getElementById('taxa-fixa-valor');
    const taxaGeminiosidadeValorSpan = document.getElementById('taxa-geminiosidade-valor');
    const totalPagarSpan = document.getElementById('total-pagar');
    const geminiosidadeValueSpan = document.getElementById('geminiosidade-value');

    function atualizarTaxas() {
      const valor = parseFloat(valorInput.value) || 0;
      const gemPercent = parseFloat(geminiosidadeInput.value) / 100;
      const taxaFixa = 0.05;
      const valorTaxaFixa = valor * taxaFixa;
      const valorTaxaGem = valor * gemPercent;
      const total = valor + valorTaxaFixa + valorTaxaGem;
      taxaFixaValorSpan.textContent = valorTaxaFixa.toFixed(2);
      taxaGeminiosidadeValorSpan.textContent = valorTaxaGem.toFixed(2);
      totalPagarSpan.textContent = total.toFixed(2);
    }

    function atualizarTaxaGeminiosidade(valor) {
      const pct = parseInt(valor);
      geminiosidadeValueSpan.textContent = pct;
      atualizarTaxas();
      // Dark Geminiosidade effect: dynamic track fill
      const fill = pct;
      geminiosidadeInput.style.background = `linear-gradient(90deg, #4caf50 ${fill}%, #30363d ${fill}%)`;
    }

    valorInput.addEventListener('input', atualizarTaxas);
    geminiosidadeInput.addEventListener('input', atualizarTaxas);
    atualizarTaxaGeminiosidade(0);

    function gerarPix() {
      const valorDigitado = parseFloat(valorInput.value);
      if (!valorDigitado || valorDigitado <= 0) return alert("Digite um valor vÃ¡lido maior que zero.");
      const ativo = document.getElementById("asset-select").value;
      if (!ativo) return alert("Selecione um ativo antes de gerar o Pix.");
      const taxaFixa = 0.05;
      const gemPercent = parseFloat(geminiosidadeInput.value) / 100;
      const total = valorDigitado * (1 + taxaFixa + gemPercent);
      const chave = "48761013889";
      const nome = "Lucas JanuÃ¡rio";
      const cidade = "BRASILIA";
      const info = `Pagamento JBX500 - Ativo: ${ativo} - Geminiosidade: ${parseInt(geminiosidadeInput.value)}%`;
      const payload = gerarPayloadPix({chave, nome, cidade, valor: total.toFixed(2), infoAdicional: info});
      const container = document.getElementById("qrcode-container");
      container.innerHTML = `
        <p>Valor original: R$ ${valorDigitado.toFixed(2)}</p>
        <p>Taxa fixa (5%): R$ ${(valorDigitado * taxaFixa).toFixed(2)}</p>
        <p>Taxa Geminiosidade (${parseInt(geminiosidadeInput.value)}%): R$ ${(valorDigitado * gemPercent).toFixed(2)}</p>
        <p><strong>Total a pagar: R$ ${total.toFixed(2)}</strong></p>
      `;
      new QRCode(container, { text: payload, width: 180, height: 180 });
    }

    function fazerSaque() {
      const valorSaque = parseFloat(valorInput.value);
      if (!valorSaque || valorSaque <= 0) return alert("Digite um valor vÃ¡lido para saque maior que zero.");
      const ativo = document.getElementById("asset-select").value;
      if (!ativo) return alert("Selecione um ativo antes de sacar.");
      alert(`SolicitaÃ§Ã£o de saque:\nAtivo: ${ativo}\nValor: R$ ${valorSaque.toFixed(2)}\n\nOperaÃ§Ã£o simulada com sucesso.`);
    }

    function gerarPayloadPix({chave, nome, cidade, valor, infoAdicional}) {
      function fmt(id,value){const s=value.length.toString().padStart(2,'0');return id+s+value;}
      const acc=fmt("00","BR.GOV.BCB.PIX")+fmt("01",chave);
      const add=fmt("05",infoAdicional);
      let p=""; p+=fmt("00","01"); p+=fmt("26",acc);
      p+=fmt("52","0000"); p+=fmt("53","986"); p+=fmt("54",valor);
      p+=fmt("58","BR"); p+=fmt("59",nome); p+=fmt("60",cidade);
      p+=fmt("62",add);
      p+="6304"+calcularCRC16(p);
      return p;
    }
    function calcularCRC16(p){let poly=0x1021,res=0xFFFF;
      for(let i=0;i<p.length;i++){res^=p.charCodeAt(i)<<8;
      for(let b=0;b<8;b++){if((res<<1)&0x10000)res=((res<<1)^poly)&0xFFFF;else res=(res<<1)&0xFFFF;}}
      return res.toString(16).toUpperCase().padStart(4,'0');
    }
  </script>
</body>
</html>
