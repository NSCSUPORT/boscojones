 <button type="button" id="generate-code-btn">Criar JBX500</button>
        <h3>Ativo Gerado:</h3>
        <pre id="generated-asset">Nenhum</pre>
    </form>
    <h3>Total a Pagar (RZX): <span id="total-to-pay">Nenhum</span></h3>
    <button type="button" id="confirm-btn" disabled>Confirmar Compra</button>
    <div id="qrcode-container" style="display: none; text-align: center; margin-top: 15px;">
        <img id="qr-code-img" alt="QR Code para pagamento" />
    </div>
</div>

<footer>
    <p>
        &copy; 2025 JBX700 HoloFi Engine — Criado por Lucas Januário.
    </p>
</footer>

<script>
    let isConfirmedFirst = false;
    const conversionRateToARK = 10;

    function generateHash(data) {
        const cryptoObj = window.crypto || window.msCrypto;
        return cryptoObj.subtle.digest("SHA-256", new TextEncoder().encode(data)).then(hash => {
            return Array.from(new Uint8Array(hash))
                .map(b => b.toString(16).padStart(2, "0"))
                .join("");
        });
    }

    function updateConfirmButtonState() {
        document.getElementById("confirm-btn").disabled = !isConfirmedFirst;
    }

    document.getElementById("generate-code-btn").addEventListener("click", async () => {
        const investmentValue = parseFloat(document.getElementById("investment-value").value);
        const profit = parseFloat(document.getElementById("profit").value);
        const giminiosidadeBase = parseFloat(document.getElementById("giminiosidade").value);

        if (isNaN(investmentValue) || isNaN(profit) || isNaN(giminiosidadeBase)) {
            alert("Por favor, preencha todos os campos corretamente!");
            return;
        }

        const giminiosidadeMaxima = giminiosidadeBase * 2;
        const totalProfit = investmentValue * (profit / 100);
        const totalToPayInUSD = (investmentValue + totalProfit) * (1 + giminiosidadeMaxima / 100);
        const totalToPayInARK = totalToPayInUSD * conversionRateToARK;

        document.getElementById("total-to-pay").innerText = totalToPayInARK.toFixed(2);

        const hash = await generateHash("JBX500-" + giminiosidadeBase + "-" + investmentValue + "-" + profit);

        const asset = {
            name: "JBX500",
            type: "RZX",
            hash: hash,
            network: "DHL4",
            features: {
                boost: true,
                sector: "symbiotic-credit",
                indexedBy: "holoFiEngine",
            },
            investmentValueUSD: investmentValue,
            profitPercent: profit,
            giminiosidadeBase: giminiosidadeBase,
        };

        document.getElementById("generated-asset").innerText = JSON.stringify(asset, null, 2);

        isConfirmedFirst = true;
        updateConfirmButtonState();
        document.getElementById("qrcode-container").style.display = "none";
    });

    document.getElementById("confirm-btn").addEventListener("click", () => {
        if (!isConfirmedFirst) {
            alert("Por favor, complete a geração do ativo JBX500!");
            return;
        }
        const totalToPay = parseFloat(document.getElementById("total-to-pay").innerText);
        if (isNaN(totalToPay)) {
            alert("Valor total inválido para pagamento.");
            return;
        }
        const amountInARK = (totalToPay * 10 ** 18).toFixed(0);
        const metamaskUri = `ethereum:?value=${amountInARK}&currency=RZX`;

        const qrCodeImage = document.getElementById("qr-code-img");
        qrCodeImage.src =
            "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=" + encodeURIComponent(metamaskUri);
        document.getElementById("qrcode-container").style.display = "block";
    });
</script>
